const newArrivalProducts = [
  {
    mainImg: "./img/OF07/den.webp",
    thumbs: [
      "./img/OF07/den.webp",
      "./img/OF07/dscf6945.webp",
      "./img/OF07/nau.webp",
    ],
    category: "NEW ARRIVAL",
    title: "TONKIN CAPTOE OXFORD - OF07",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
];

const oxfordProducts = [
  {
    mainImg: "./img/OF02/dscf0272.webp",
    thumbs: [
      "./img/OF02/dscf0272.webp",
      "./img/OF02/dscf6967.webp",
      "./img/OF02/dscf6941.webp",
    ],
    category: "OXFORD",
    title: "CHARLES CAPTOE OXFORD - OF02",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
  {
    mainImg: "./img/OF32/dscf8054.webp",
    thumbs: [
      "./img/OF32/dscf8054.webp",
      "./img/OF32/dscf9565.webp",
      "./img/OF32/z4838030916872-882737d7eaf7c8af77deae5b2dbffea2.webp",
    ],
    category: "OXFORD",
    title: "SAVILLE CAPTOE OXFORD - OF32",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
   {
    mainImg: "./img/OF07/den.webp",
    thumbs: [
      "./img/OF07/den.webp",
      "./img/OF07/dscf6945.webp",
      "./img/OF07/nau.webp",
    ],
    category: "OXFORD",
    title: "SAVILLE CAPTOE OXFORD - OF32",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
   {
    mainImg: "./img/OF-TCCC08/dscf6419-2.webp",
    thumbs: [
      "./img/OF-TCCC08/dscf6419-2.webp",
      "img/OF-TCCC08/dscf7759.webp",
      "img/OF-TCCC08/dscf6429-d6c70724-5321-453d-adc3-5c4896f6ddff.webp",
    ],
    category: "OXFORD",
    title: "SAVILLE CAPTOE OXFORD - OF32",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
];

const loaferProducts = [
  {
    mainImg: "./img/LF20/dscf1271.webp",
    thumbs: [
      "./img/LF20/dscf1271.webp",
      "./img/LF20/dscf1273.webp",
      "./img/LF20/dscf1275.webp",
    ],
    category: "LOAFER",
    title: "CLASSIC LOAFER - LF20",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
  {
    mainImg: "./img/LF18M/dscf1803.webp",
    thumbs: [
      "./img/LF18M/dscf1803.webp",
      "./img/LF18M/dscf1804.webp",
      "./img/LF18M/dscf2673.webp",
    ],
    category: "LOAFER",
    title: "ELEGANT LOAFER - LF18M",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
    {
    mainImg: "img/LF-PF002/dscf8596.webp",
    thumbs: [
      "img/LF-PF002/dscf8596.webp",
      "img/LF-PF002/dscf8601.webp",
      "img/LF-PF002/dscf8602.webp",
    ],
    category: "LOAFER",
    title: "ELEGANT LOAFER - LF18M",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
    {
    mainImg: "img/PF004/dscf0096.webp",
    thumbs: [
      "img/PF004/dscf0096.webp",
      "img/PF004/dscf8730.webp",
      "img/PF004/dscf8731-074a4e16-1ad9-4f9e-8f26-4df32f2139c8.webp",
    ],
    category: "LOAFER",
    title: "ELEGANT LOAFER - LF18M",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
      {
    mainImg: "img/PF004/dscf0096.webp",
    thumbs: [
      "img/PF004/dscf0096.webp",
      "img/PF004/dscf8730.webp",
      "img/PF004/dscf8731-074a4e16-1ad9-4f9e-8f26-4df32f2139c8.webp",
    ],
    category: "LOAFER",
    title: "ELEGANT LOAFER - LF18M",
    priceNew: "1.400.000đ",
    priceOld: "1.750.000đ",
    discount: "-20%",
  },
];

const derbyProducts = [
  {
    mainImg: "img/DB07/dscf1507.webp",
    thumbs: [
      "img/DB07/dscf1507.webp",
      "img/DB07/dscf3581.webp",
      "img/DB07/dscf3587.webp",
    ],
    category: "DERBY",
    title: "CLASSIC DERBY - DB01",
    priceNew: "1.200.000đ",
    priceOld: "1.500.000đ",
    discount: "-20%",
  },
    {
    mainImg: "img/DB14/dscf8725.webp",
    thumbs: [
      "img/DB14/dscf8725.webp",
      "img/DB14/dscf8885.webp",
      "img/DB14/dscf8897.webp",
    ],
    category: "DERBY",
    title: "CLASSIC DERBY - DB01",
    priceNew: "1.200.000đ",
    priceOld: "1.500.000đ",
    discount: "-20%",
  },
    {
    mainImg: "img/DB24/dscf8708.webp",
    thumbs: [
      "img/DB24/dscf8708.webp",
      "img/DB24/dscf8710.webp",
      "img/DB24/dscf8713.webp",
    ],
    category: "DERBY",
    title: "CLASSIC DERBY - DB01",
    priceNew: "1.200.000đ",
    priceOld: "1.500.000đ",
    discount: "-20%",
  },
    {
    mainImg: "img/DB34/dscf8882.webp",
    thumbs: [
      "img/DB34/dscf8882.webp",
      "img/DB34/dscf8898.webp",
      "img/DB34/dscf9534.webp",
    ],
    category: "DERBY",
    title: "CLASSIC DERBY - DB01",
    priceNew: "1.200.000đ",
    priceOld: "1.500.000đ",
    discount: "-20%",
  },
];


// ================== BANNERS ==================
const banners = {
  oxford:
    "//bizweb.dktcdn.net/100/292/624/collections/dscf8155.jpg?v=1650384517223",
  loafer:
    "//bizweb.dktcdn.net/100/292/624/collections/191121-30.jpg?v=1650384826053",
  derby:
    "//bizweb.dktcdn.net/100/292/624/collections/db1214-28.jpg?v=1586950393023",
};

// ================== RENDER FUNCTION ==================
function render(products, containerId) {
  const container = document.getElementById(containerId);
  if (!container) return;

  container.innerHTML = "";

  products.forEach((p) => {
    let thumbsHTML = p.thumbs
      .map(
        (t) => `<img src="${t}" class="border thumb" width="40" height="40" />`
      )
      .join("");

    container.innerHTML += `
      <div class="col-md-3">
        <div class="card custom-card position-relative">
          <span class="position-absolute top-0 end-0 bg-danger text-white px-2 py-1 small">${p.discount}</span>
          <img src="${p.mainImg}" class="card-img-top main-img" alt="${p.title}" />
          <div class="card-body position-relative text-center">
            <div class="d-flex justify-content-center gap-2 mb-2 thumbnails">
              ${thumbsHTML}
            </div>
            <h7 class="small product-title">${p.category}</h7>
            <h6 class="card-title-seriese product-subtitle">${p.title}</h6>
            <p class="price-info">
              <span class="text-danger fw-bold me-2">${p.priceNew}</span>
              <span class="text-muted text-decoration-line-through">${p.priceOld}</span>
            </p>
            <button class="btn nutchon choose-button">Tùy chọn</button>
          </div>
        </div>
      </div>
    `;
  });
}

// ================== PAGE LOAD ==================
// Lấy tham số từ URL
const urlParams = new URLSearchParams(window.location.search);
const type = urlParams.get("type");

// Map sản phẩm theo loại
const productMap = {
  oxford: oxfordProducts,
  loafer: loaferProducts,
  derby: derbyProducts,
};

// Render banner
const bannerEl = document.getElementById("cateroge-banner");
if (bannerEl) bannerEl.src = banners[type] || "";

// Render sản phẩm
render(productMap[type] || [], "cateroge-products");

// ================== HOVER EFFECT ==================
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".custom-card").forEach(function (card) {
    const mainImg = card.querySelector(".main-img");
    const thumbnails = card.querySelectorAll(".thumb");

    let index = 0;
    let interval;

    // Hover vào card: tự động chuyển ảnh
    card.addEventListener("mouseenter", () => {
      interval = setInterval(() => {
        index = (index + 1) % thumbnails.length;
        mainImg.src = thumbnails[index].src;
      }, 1000);
    });

    // Rời chuột: dừng và reset ảnh đầu tiên
    card.addEventListener("mouseleave", () => {
      clearInterval(interval);
      index = 0;
      mainImg.src = thumbnails[0].src;
    });

    // Click vào ảnh nhỏ => đổi ảnh chính
    thumbnails.forEach((thumb, i) => {
      thumb.addEventListener("click", () => {
        clearInterval(interval); // dừng auto chuyển
        index = i;
        mainImg.src = thumb.src;
      });
    });
  });
});
